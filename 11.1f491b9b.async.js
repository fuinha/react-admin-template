(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{A5eh:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var u=n(a("bx4M"));a("+L6B");var d=n(a("2/Rp"));a("5Dmo");var i=n(a("3S7+")),r=n(a("qIgq"));a("2qtc");var c=n(a("kLXV"));a("tU7J");var o=n(a("wFql")),f=l(a("q1tI")),s=a("MuoO"),m=n(a("CLD0")),p=n(a("Oc/f")),v=n(a("DFD0")),E=o.default.Paragraph,y=c.default.confirm,b=function(e){var t=e.dispatch,a=e.modules,l=e.actions,n=(0,f.useState)(!1),c=(0,r.default)(n,2),o=c[0],s=c[1],b=(0,f.useState)("create"),h=(0,r.default)(b,2),g=h[0],k=h[1],I=(0,f.useState)({}),x=(0,r.default)(I,2),C=x[0],q=x[1];f.default.useEffect(function(){t({type:"action/fetchModules"}),w()},[]);var w=function(){t({type:"action/fetchList"})},O=function(){q({}),s(!0),k("create")},D=function(e){q(e),s(!0),k("update")},F=function(){s(!1)},M=function(e){t("create"===g?{type:"action/fetchCreate",payload:e,callback:function(){s(!1),w()}}:{type:"action/fetchUpdate",payload:e,callback:function(){s(!1),w()}})},S=function(e){y({title:"\u786e\u5b9a\u5220\u9664".concat(e.name,"\u64cd\u4f5c?"),content:"\u5220\u9664\u4e0d\u53ef\u6062\u590d",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){A(e)}})},A=function(e){t({type:"action/fetchRemove",payload:{id:e.id}}).then(function(){t({type:"action/fetchList"})})},T=[{title:"\u6240\u5c5e\u6a21\u5757",dataIndex:"module",render:function(e){return e.name||"--"}},{title:"\u64cd\u4f5c\u540d\u79f0",dataIndex:"name"},{title:"\u663e\u793a\u540d\u79f0",dataIndex:"displayName"},{title:"\u64cd\u4f5c\u7c7b\u578b",dataIndex:"type",render:function(e){return 1===e?"\u7cfb\u7edf\u64cd\u4f5c":"\u5176\u4ed6\u64cd\u4f5c"}},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return 1===t.type?"--":f.default.createElement("div",{className:"table-action"},f.default.createElement(i.default,{placement:"top",title:"\u66f4\u65b0"},f.default.createElement(d.default,{size:"small",icon:"edit",onClick:function(){D(t)}})),f.default.createElement(i.default,{placement:"top",title:"\u5220\u9664"},f.default.createElement(d.default,{type:"danger",size:"small",icon:"delete",onClick:function(){S(t)}})))}}],V=(0,f.useMemo)(function(){return f.default.createElement(p.default,{data:{list:l},columns:T})},[e.actions]);return f.default.createElement(f.default.Fragment,null,f.default.createElement(m.default,{title:"\u64cd\u4f5c\u7ba1\u7406",extra:[f.default.createElement(d.default,{key:"1",type:"primary",onClick:O},"\u65b0\u5efa\u64cd\u4f5c")]},f.default.createElement(E,null,"\u64cd\u4f5c\u662f\u6307\u5bf9\u5177\u4f53\u8d44\u6e90\u7684\u64cd\u4f5c\uff0c\u591a\u6570\u60c5\u51b5\u4e0b Action \u4e0e\u7cfb\u7edf\u7684 API \u4e00\u4e00\u5bf9\u5e94\uff0c\u4f46\u4e5f\u6709\u4f8b\u5916\u3002")),f.default.createElement(u.default,{bordered:!1},V),f.default.createElement(v.default,{visible:o,modules:a,formType:g,currentAction:C,onSubmit:M,onClose:F}))},h=(0,s.connect)(function(e){var t=e.action;return{modules:t.modules,actions:t.list}})(b);t.default=h},DFD0:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("p0pE")),u=l(a("qIgq"));a("5NDa");var d=l(a("5rEg"));a("OaEy");var i=l(a("2fM7"));a("y8nQ");var r=l(a("Vl3Y")),c=l(a("q1tI")),o=l(a("iVvo")),f=r.default.Item,s=i.default.Option,m=d.default.TextArea,p=function(e){var t=e.visible,a=e.modules,l=e.onClose,p=e.onSubmit,v=e.formType,E=e.form,y=e.currentAction,b=E.getFieldDecorator,h=c.default.useState(""),g=(0,u.default)(h,2),k=g[0],I=g[1];c.default.useEffect(function(){v&&I("create"===v?"\u521b\u5efa\u64cd\u4f5c":"\u66f4\u65b0\u64cd\u4f5c")},[e.formType]),c.default.useEffect(function(){t||E.resetFields()},[e.visible]);var x=function(){E.validateFields(function(e,t){var a=(0,n.default)({},t);"update"===v&&(a.id=y.id),p&&p(a)})},C={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:15}}},q=c.default.useMemo(function(){return a.map(function(e){return c.default.createElement(s,{key:e.id,value:e.id},e.name)})},[e.modules]);return c.default.createElement(o.default,{visible:t,onClose:l,onCancel:l,onConfirm:x,width:600,title:k},c.default.createElement(r.default,null,c.default.createElement(f,Object.assign({},C,{label:"\u64cd\u4f5c\u540d\u79f0"}),b("name",{initialValue:y.name,rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(c.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165\u64cd\u4f5c\u540d\u79f0"}))),c.default.createElement(f,Object.assign({},C,{label:"\u663e\u793a\u540d\u79f0"}),b("displayName",{initialValue:y.displayName,rules:[{required:!0,message:"\u663e\u793a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(c.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165\u663e\u793a\u540d\u79f0"}))),c.default.createElement(f,Object.assign({},C,{label:"\u6240\u5c5e\u6a21\u5757"}),b("moduleId",{initialValue:(y.module||{}).id,rules:[{required:!0,message:"\u6240\u5c5e\u6a21\u5757\u4e0d\u80fd\u4e3a\u7a7a"}]})(c.default.createElement(i.default,{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u6a21\u5757",optionFilterProp:"children"},q))),c.default.createElement(f,Object.assign({},C,{label:"\u5907\u6ce8"}),b("remark",{initialValue:y.remark,rules:[]})(c.default.createElement(m,{rows:3})))))};p.defaultProps={modules:[]};var v=r.default.create()(p);t.default=v}}]);