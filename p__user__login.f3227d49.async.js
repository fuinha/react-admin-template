(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{WxbV:function(e,t,a){},"c+yx":function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"b",function(){return l}),a.d(t,"a",function(){return s});var n=a("wd/R"),r=a.n(n),o=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/;function i(e){return o.test(e)}function l(e){return!!e&&"function"===typeof e.then}function s(e,t){return r()(e).format(t||"YYYY-MM-DD HH:mm:ss")}},gRjX:function(e,t,a){"use strict";a.r(t);var n=a("2Taf"),r=a.n(n),o=a("vZ4D"),i=a.n(o),l=a("l4Ni"),s=a.n(l),c=a("ujKo"),p=a.n(c),u=a("MhPg"),d=a.n(u),g=a("mrSG"),m=a("q1tI"),f=a.n(m),h=a("MuoO"),y=a("je13"),v=a.n(y),E=a("LeJ0"),b=(a("+L6B"),a("2/Rp")),w=(a("Pwec"),a("CtXQ")),x=(a("5NDa"),a("5rEg")),T=a("p0pE"),C=a.n(T),j=(a("y8nQ"),a("Vl3Y")),O=a("mOP9"),M=a("Y2fQ"),L=j["a"].Item,S=function(e){var t=e.prefixCls,a=e.loading,n=e.onLogin,r=e.onChangeType,o=e.form,i=o.validateFields,l=o.getFieldDecorator,s=function(e){e.preventDefault(),i(function(e,t){e||n&&n(C()({},t,{type:"password"}))})},c=function(){r&&r("sms")};return f.a.createElement(j["a"],{onSubmit:s},f.a.createElement(L,null,l("username",{initialValue:"admin",rules:[{required:!0,message:Object(M["formatMessage"])({id:"validation.username.required"})}]})(f.a.createElement(x["a"],{size:"large",prefix:f.a.createElement(w["a"],{type:"user"}),placeholder:"".concat(Object(M["formatMessage"])({id:"app.login.username"}))}))),f.a.createElement(L,null,l("password",{initialValue:"123456",rules:[{required:!0,message:Object(M["formatMessage"])({id:"validation.password.required"})}]})(f.a.createElement(x["a"],{size:"large",prefix:f.a.createElement(w["a"],{type:"lock"}),autoComplete:"off",type:"password",placeholder:"".concat(Object(M["formatMessage"])({id:"app.login.password"})),suffix:f.a.createElement("span",{className:"forgot-link"},f.a.createElement(O["a"],{to:"/user/password-reset"},f.a.createElement(M["FormattedMessage"],{id:"app.login.forgot-password"})))}))),f.a.createElement(L,null,f.a.createElement(b["a"],{loading:a,type:"primary",htmlType:"submit",size:"large",block:!0},f.a.createElement(M["FormattedMessage"],{id:"app.login.login"})),f.a.createElement("div",{className:"".concat(t,"__switch")},f.a.createElement("span",{onClick:c},f.a.createElement(M["FormattedMessage"],{id:"app.login.login-type-sms"})))))};S.defaultProps={loading:!1};var k=j["a"].create()(S),q=a("qIgq"),D=a.n(q),I=a("Y/ft"),F=a.n(I),z=a("c+yx"),N=function(e){var t=null,a=0,n=e.second,r=e.initText,o=e.runText,i=e.resetText,l=e.onCaptcha,s=e.storageKey,c=e.onEnd,p=F()(e,["second","initText","runText","resetText","onCaptcha","storageKey","onEnd"]),u=Object(m["useState"])(r),d=D()(u,2),g=d[0],h=d[1],y=Object(m["useState"])(!1),v=D()(y,2),E=v[0],w=v[1],x=Object(m["useState"])(n),T=D()(x,1),C=T[0],j=Object(m["useState"])(!1),O=D()(j,2),M=O[0],L=O[1];function S(e){e.preventDefault(),L(!0);var t=l?l():null;Object(z["b"])(t)?t.then(function(){L(!1),q()}).catch(function(){L(!1),console.log("\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25")}):t&&(L(!1),q())}function k(e){return o.replace(/\{([^{]*?)%s(.*?)\}/g,e.toString())}function q(){w(!0);var e=a||C;if(s){var n=(new Date).getTime()+1e3*e;sessionStorage.setItem(s,n.toString())}a||h(k(e)),t=setInterval(function(){e--,h(k(e)),e<=0&&I()},1e3)}function I(){h(i),w(!1),t&&clearInterval(t),s&&sessionStorage.removeItem(s),c&&c()}return Object(m["useEffect"])(function(){var e=sessionStorage.getItem(s);if(s&&e){var n=~~((Number(e)-(new Date).getTime())/1e3);n>0&&(a=n,h(k(n)),q())}return function(){t&&clearInterval(t)}},[]),f.a.createElement(b["a"],Object.assign({},p,{onClick:S,loading:M,disabled:E}),g)};N.defaultProps={second:60,initText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",runText:"{%s}\u79d2\u540e\u91cd\u65b0\u83b7\u53d6",resetText:"\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801"};var _=j["a"].Item,P=function(e){var t=e.prefixCls,a=e.loading,n=e.onLogin,r=e.onChangeType,o=e.form,i=o.validateFields,l=o.getFieldDecorator,s="password",c=function(e){e.preventDefault(),i(function(e,t){e&&n&&n(C()({},t,{type:s}))})},p=function(){r&&r(s)};return f.a.createElement(j["a"],{onSubmit:c},f.a.createElement(_,null,l("mobile",{rules:[{required:!0,message:Object(M["formatMessage"])({id:"validation.mobile.required"})}]})(f.a.createElement(x["a"],{size:"large",prefix:f.a.createElement(w["a"],{type:"mobile"}),placeholder:"".concat(Object(M["formatMessage"])({id:"app.login.mobile"}))}))),f.a.createElement(_,null,l("code",{rules:[{required:!0,message:Object(M["formatMessage"])({id:"validation.verification-code.required"})}]})(f.a.createElement(x["a"],{size:"large",autoComplete:"off",maxLength:6,prefix:f.a.createElement(w["a"],{type:"key"}),placeholder:"".concat(Object(M["formatMessage"])({id:"app.login.verification-code"})),suffix:f.a.createElement(N,{className:"verification-code-button"})}))),f.a.createElement(_,null,f.a.createElement(b["a"],{loading:a,type:"primary",htmlType:"submit",size:"large",block:!0},f.a.createElement(M["FormattedMessage"],{id:"app.login.login"})),f.a.createElement("div",{className:"".concat(t,"__switch")},f.a.createElement("span",{onClick:p},f.a.createElement(M["FormattedMessage"],{id:"app.login.login-type-password"})))))};P.defaultProps={loading:!1};var Y=j["a"].create()(P),V=(a("WxbV"),function(e){function t(){var e;return r()(this,t),e=s()(this,p()(t).apply(this,arguments)),e.handleLogin=function(t){var a=e.props.dispatch;a({type:"login/fetchLogin",payload:t})},e.handleChangeType=function(t){var a=e.props.dispatch,n=E["c"].loginType;v.a.set(n,t),a({type:"login/changeLoginType",payload:t})},e}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.loginType,n=e.loading;return f.a.createElement("div",{className:t},"password"===a&&f.a.createElement(k,{prefixCls:t,loading:n,onLogin:this.handleLogin,onChangeType:this.handleChangeType}),"sms"===a&&f.a.createElement(Y,{prefixCls:t,loading:n,onLogin:this.handleLogin,onChangeType:this.handleChangeType}))}}]),t}(f.a.Component));V.defaultProps={prefixCls:"login-page"},V=g["__decorate"]([Object(h["connect"])(function(e){var t=e.loading,a=e.login;return{loginType:a.type,loading:t.effects["login/fetchLogin"]}})],V);t["default"]=V}}]);